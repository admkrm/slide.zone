<!doctype html>
<html>
	<head>
		<title>Python OOP / development: exceptions en foutafhandeling</title>
		<link rel="stylesheet" type="text/css" href="../css/reset.css">
		<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="../highlight/styles/googlecode.css">
		<link href="https://fonts.googleapis.com/css?family=Karla:700|Open+Sans" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="../css/agnes.css">
		<link rel="stylesheet" type="text/css" href="../css/htmlgallery.css">
		<script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/194554/scroll-converter.min.js'></script>
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
		<script src='../highlight/highlight.pack.js'></script>
		<script src="../js/script.js" defer></script>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8">
	</head>
	<body data-markdown="true">
				<section>
							# Python OOP / development
							## Exceptions en foutafhandeling
							#### Kristof Michiels
				</section>
				<section>
							## Inhoud

							- Wat zijn exceptions? 
							- Voorbeelden van exceptions
							- Hoe omgaan met exceptions?
							- Het try en except-blok
							- Meerdere except-blokken
							- Else
							- Finally
							- Zelf een exception oproepen
				</section>
				<section>
							## Wat zijn exceptions?
							- Exceptions zijn fouten (errors, letterlijk: uitzonderingen). Wanneer tijdens het uitvoeren van een programma zo'n fout optreedt:
								- wordt een __exception object__ aangemaakt
								- __stopt het programma__ met de verdere uitvoering
								- schrijft Python de __traceback__ naar de console, die eindigt met een beschrijving vd exception
							- Over welke fouten hebben we het? Heel vaak langs de invoerzijde
								- Bvb de gebruiker kan een niet-numerieke waarde ingeven waar er één wordt verwacht 
								- Bvb de gebruiker kan verkeerdelijk een niet-bestaande bestandsnaam meegeven 
				</section>
				<section>
							## Voorbeelden van exceptions (via de interactieve shell)

							Een string die geen getalwaarde bevat omzetten naar een integer resulteert in een _ValueError_ exception:

							```Bash
							>>> int("hallo")
							Traceback (most recent call last):
							File "<stdin>", line 1, in <module>
							ValueError: invalid literal for int() with base 10: 'hallo'
							```

							Delen door 0 levert een _ZeroDivisionError_ exception op: 

							```Bash
							>>> print(20/0)
							Traceback (most recent call last):
							File "<interactive input>", line 1, in <module>
							ZeroDivisionError: integer division or modulo by zero
							```
				</section>
				<section>
							## Voorbeelden van exceptions (via de interactieve shell)

							Een niet-bestaand list-item resulteert in een _IndexError_ exception:

							```Bash
							>>> mijn_list = []
							>>> print(mijn_list[5])
							Traceback (most recent call last):
							File "<interactive input>", line 1, in <module>
							IndexError: list index out of range
							```

							Een item toevoegen aan een tuple (immutable!) levert een TypeError exception op: 

							```Bash
							>>> mijn_tuple = ("a", "e", "i", "o")
							>>> mijn_tuple[2] = "u" 
							Traceback (most recent call last):
							File "<interactive input>", line 1, in <module>
							TypeError: 'tuple' object does not support item assignment
							```
				</section>
				<section>
							## Hoe omgaan met exceptions?

							- In elk van de bovenstaande voorbeelden bestaat het foutbericht op de laatste regel uit twee delen (gescheiden door een dubbelpunt):  het type fout en de bijzonderheden over deze fout 
							- In bepaalde gevallen willen we wanneer een exception gebeurt het programma __niet laten stoppen__
							- Gelukkig kunnen we in dat geval __actie ondernemen__ en daarna het programma laten __verder gaan__
							- We kunnen hiervoor het __try-except-statement__ gebruiken en plaatsen rond een code-blok die onder bepaalde omstandigheden tot een exception zou kunnen leiden
				</section>
				<section>
							## Try en except

							- In dit voorbeeld vragen we de gebruiker een bestandsnaam in te voeren en proberen dit bestand vervolgens te openen
							- Hier gebruiken we een algemene except-blok. Daarmee wordt elke mogelijk voorkomende exception op dezelfde manier afgehandeld
					
							```Python
							mijn_bestand_naam = input("Geef een bestandsnaam: ")
							try:
								mijn_bestand = open(mijn_bestand_naam, "r")
							except:
								print(f"Het bestand {mijn_bestand_naam} kon niet worden gevonden.")
							```
				</section>
				<section>
							## Try en except

							- _Try_ voert en observeert de statements in het codeblok uit
							- Indien er zich geen exceptions voordoen dat wordt de except-blok overgeslagen
							- Wanneer een exception zich voordoet binnen een try-blok stopt de verdere uitvoering binnen deze blok en springt de uitvoering onmiddellijk naar de aangewezen except-blok 
							- Na uitvoering van de statements in de _except_-blok uitgevoerd gaat de toepassing verder
				</section>
				<section>
							## Try en except

							- We kunnen gaan verfijnen en expliciet een FileNotFoundError exception afhandelen
							- Noot: hier zie je dat we de toepassing zelf expliciet beëindigen met de quit()- functie (dit is niet verplicht)

							```Python
							antwoord = input("Geef een bestandsnaam: ")
							try:
								mijn_bestand = open(antwoord, "r")
							except FileNotFoundError:
								print("Het bestand kon niet worden gevonden. Programma wordt afgesloten...") 
								quit()
							```
				</section>
				<section>
							## Voorbeeld in een loop

							```Python
							antwoord = input("Geef een bestandsnaam: ")
							bestand_geopend = False
							while bestand_geopend == False:
								try:
									mijn_bestand = open(antwoord, "r")
									bestand_geopend = True
								except FileNotFoundError:
									print("Het bestand kon niet worden gevonden") 
									antwoord = input("Geef een bestandsnaam: ")
							```

							- Hier passen we bovenstaande code aan zodat het programma blijft proberen tot een bestaand bestand werd gevonden
				</section>
				<section>
							## Meerdere except-blokken

							```Python
							try:
								print(onbestaande_variabele)
							except NameError:
								print("Deze variabele is niet gedefinieerd")
							except:
								print("Iets anders is foutgelopen")
							```

							- We kunnen in één en het zelfde try-except-blok meerdere excepts toevoegen, elk voor één of meerdere specifieke exceptions
							- Elke except-blok kan aangeven welk soort exception het wil opvangen door na het except trefwoord onmiddellijk het type exception mee te geven
							- Een except-blok zonder specifieke exception zal elk type exception opvangen (die nog niet door een specifieke exception werd behandeld)
				</section>
				<section>
							## else-blok

							```Python
							try:
								print("Hallo wereld")
							except:
								print("Er is een fout opgetreden bij het uitvoeren van het programma")
							else:
								print("Alles is perfect verlopen. Geen fout(en)!")
  							```

							- Je kan een else-blok toevoegen om code mee te geven die moet worden uitgevoerd enkel indien er geen fout(en) zijn opgetreden
							- Gebruik van else is niet verplicht
				</section>
				<section>
							## finally-blok

							```Python
							try:
								print(niet_bestaande_variabele)
							except:
								print("Er is iets foutgelopen")
							finally:
								print("De try-except-blok is afgelopen")
							```

							- Het finally-blok bevat code die hoe dan ook uitgevoerd wordt nadat de try-except-blok is afgehandeld, los van of er zich een fout heeft voorgedaan of niet
							- Je hoeft finally niet te gebruiken, maar ze is heel handig als je bepaalde code wil laten lopen op het einde van de blok. Bvb het netjes sluiten van bestanden of objecten...

				</section>
				<section>
							## Zelf een exception oproepen

							```Python
							mijn_getal = -34
							if mijn_getal < 0:
  								raise Exception("Negatieve getallen zijn niet toegelaten")
							```

							- Het raise keyword stelt je in staat zelf een bepaalde error te initiëren 
							- Hier wordt een algemene exception opgeroepen wanneer een getal kleiner is dan of gelijk aan 0
							- Behalve de naam van de fout (hier dus een algemene exception) wordt ook de tekst in het argument meegegeven naar de gebruiker
				</section>		
				<section>
							## Zelf een exception oproepen

							```Python
							mijn_getal = "Hallo wereld!"

							if not type(mijn_getal) is int:
  								raise TypeError("Enkel gehele getallen zijn toegelaten")
							```

							- Je kan ook een specifieke fout oproepen: hier een TypeError
							- Deze fouten kunnen uiteraard afgehandeld worden als ze gebeuren binnen een try-except-blok
				</section>		
				<section>
							## Python OOP / development - foutafhandeling - kristof.michiels01@ap.be
				</section>
	</body>
</html>
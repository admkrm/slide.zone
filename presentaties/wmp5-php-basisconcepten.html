<!doctype html>
<html>
	<head>
		<title>WMP5: PHP - Basisconcepten</title>
		<link rel="stylesheet" type="text/css" href="../css/reset.css">
		<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="../highlight/styles/googlecode.css">
		<link href="https://fonts.googleapis.com/css?family=Karla:700|Open+Sans" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="../css/agnes.css">
		<link rel="stylesheet" type="text/css" href="../css/htmlgallery.css">
		<script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/194554/scroll-converter.min.js'></script>
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
		<script src='../highlight/highlight.pack.js'></script>
		<script src="../js/script.js" defer></script>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8">
	</head>
	<body data-markdown="true">
				<section>
							# Webmediaproductie 5
							## PHP - Basisconcepten
							#### Kristof Michiels
				</section>
				<section class="chapter">
							## Lesinhoud: waar gaan we heen?
				</section>
				<section>
							## Dit zal je kunnen na afloop van deze les
							- Het plaatsen van PHP binnen webpagina’s
							- Data sturen als output naar de browser
							- Comments toevoegen in je code
							- Variabelen en hun gebruik
							- PHP foutmeldingen
							- Een HTML5 "template" creëren
				</section>
				<section>
							## Dit zal je kunnen na afloop van deze les
							- Objecten en hun gebruik
							- Strings samenvoegen
							- URL variabelen oproepen met $_GET
							- Een class definitie "declareren"
							- Dynamische CSS embedden
				</section>
				<section class="chapter">
							## Plaatsen van PHP binnen webpagina's
				</section>
				<section>
							## PHP scripts insluiten
							- Voor de server een opgevraagd bestand naar de browser stuurt, wordt eerst het PHP script uitgevoerd
							- Hoe weet de server waar te zoeken naar PHP?
							- Om te beginnen zoekt de server enkel in bestanden met de .php-extensie
							- Een .php-bestand kan uiteraard ook andere zaken bevatten (zoals html)
							- Om efficiënt te kunnen zoeken maken we gebruik van PHP scheidingstekens: &lt;?php en ?>
							- Alles buiten die scheidingstekens wordt behandeld als html
							- Je mag zoveel PHP blokken toevoegen als je wil
				</section>
				<section>
							## PHP scripts insluiten

							```php
							&lt;p&gt;Dit is wat statische tekst&lt;/p&gt;
							&lt;?php echo "&lt;p&gt;Deze tekst werd aangemaakt door PHP!&lt;/p&gt;"; ?&gt;
							&lt;p&gt;Deze tekst niet.&lt;/p&gt;
							```

							```php
							&lt;?php echo "&lt;p>Dit is wat tekst.&lt;/p>"; ?>
							&lt;p>Deze tekst is statisch,
							&lt;?php echo " maar deze tekst dan weer niet"; ?>
							&lt;/p>
							&lt;?php echo "&lt;p>"; ?>
							Deze tekst wordt begrensd door p-elementen aangemaakt door php.
							&lt;?php echo "&lt;/p>"; ?>
							```
				</section>
				<section>
							## Echo: output sturen naar de browser

							![Echo](../img/wmp5-php-docs-echo.png)
							##### https://www.php.net/manual/en/function.echo.php
				</section>
				<section class="chapter">
							## Variabelen
				</section>
				<section>
							## Variabelen
							- Een variabele is een woord dat verwijst naar een waarde die in het systeemgeheugen is opgeslagen
							- Je code kan een reeks acties uitvoeren afhankelijk van de inhoud van een variabele
							- De waarde van de variabele veranderen resulteert dan in een andere output
							- In één enkele lijn kan je in PHP een variabele declareren en er een waarde aan toekennen

							```php
							&lt;?php
								$mijnNaam = "Pedro";
								$vriendNaam = "Ronny";
								echo "&lt;p>Mijn naam is $mijnNaam en mijn vriend heet $vriendNaam.&lt;/p>";
							?>
							```
				</section>
				<section>
							## Naamgeving van je variabelen
							- In PHP beginnen alle variabelen verplicht met een $
							- Er zijn andere beperkingen, maar als je enkel alfabetische karakters gebruikt is er nooit een probleem
							- Gebruik geen spaties of speciale karakters zoals !"#€%&/.
							- Je mag nummers gebruiken, maar niet als eerste karakter. $1a kan niet, $a1 wel
							- bij PHP kan je camelCasing gebruiken, net als bij JS
				</section>
				<section class="chapter">
							## PHP foutmeldingen
				</section>
				<section>
							## PHP foutmeldingen
							- Fouten schrijven in je PHP-code is onvermijdelijk
							- Feedback krijgen over die fouten is belangrijk. PHP kan foutmeldingen voorzien
							- Je kan de fout dan verbeteren en er uit leren
							- Niet alle fouten worden getoond door PHP, tenzij je er om vraagt
							- Onthou: plaats beide regels op volgende slide bovenaan elke php-pagina
							- Pas op: foutmeldingen zijn soms cryptisch. Vaak moeten google of bvb stackoverﬂow.com raad brengen
				</section>
				<section>
							## PHP foutmeldingen

							- https://www.php.net/manual/en/function.error-reporting.php
							- https://www.php.net/manual/en/function.ini-set.php

							```php
							&lt;?php
								// deze lijnen dragen PHP op om alle foutmeldingen weer te geven in browser
								error_reporting( E_ALL );
								ini_set( "display_errors", 1 );
							?>
							```
				</section>
				<section class="chapter">
							## Een HTML-template creëren
				</section>
				<section>
							## Een HTML-pagina maken in PHP
							- PHP is een fantastische taal om op spaarzame wijze dynamische HTML-pagina’s te maken
							- Hier maak je in het geheugen een valide HTML5 pagina die je vervolgens echo-t naar de browser
							- Probeer zelf de code uit en bekijk zeker ook de source code in je browser

							```php
							&lt;?php
								error_reporting( E_ALL );
								ini_set( "display_errors", 1 );
								$titel = "Mijn portfolio - startpagina";
								$content = "&lt;h1>Wereld, maak kennis met mijn portfolio!&lt;/h1>";
								$pagina = "&lt;!DOCTYPE html>&lt;html>&lt;head>&lt;title>$titel&lt;/title>
								&lt;meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>&lt;/head>
								&lt;body>$content&lt;/body>&lt;/html>";
								echo $pagina;
							?>
							```

				</section>
				<section>
							## Omzetten naar een HTML-template voor alle pagina's
							- We zetten onze denkoefening verder
							- Maak een pagina aan en noem ze pagina.php. We stoppen het bestand in een folder met de naam templates
							- Het __return__ statement is zeer handig: vergelijkbaar met een echo die je maar éénmaal uitvoert per pagina
							- Elke waarde die volgt op return wordt teruggegeven. Daarna stopt het script met uitvoeren, ook al zou er nog extra code onder de return statement staan

							```php
							&lt;?php
								return "&lt;!DOCTYPE html>&lt;html>&lt;head>&lt;title>$titel&lt;/title>
								&lt;meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
								&lt;/head>&lt;body>$content&lt;/body>&lt;/html>";
							?>
							```

				</section>
				<section>
							## Omzetten naar een HTML-template voor alle pagina's
							- Om een ander bestand in te voegen in een ander bestand gebruik je het statement __include_once__
							- We spreiden hiermee code over verschillende bestanden. We noemen dit bestand index.php.
							- De template zit nu in een afzonderlijk bestand en kan herbruikt worden in verschillende contexten

							```php
							&lt;?php
								error_reporting( E_ALL );
								ini_set( "display_errors", 1 );
								$titel = "Mijn portfolio - startpagina";
								$content = "&lt;h1>Hallo wereld!&lt;/h1>";
								//gebruik het relatieve pad naar het bestand dat je wil gebruiken
								$pagina = include_once "templates/pagina.php";
								echo $pagina;
							?>
							```
				</section>
				<section class="chapter">
							## PHP Comments
				</section>
				<section>
							## Comments in je code
							- Gebruik // voor een enkele regel commentaar
							- of /* en */ voor commentaar gespreid over meerdere regels
							- Net zoals bij css dus :-)

							```php
							&lt;?php
								//dit is een enkele lijn-commentaar
								/* Dit is commentaar gespreid over verschillende regels
								we noemen dat een block-commentaar */
							?>
							```
				</section>
				<section class="chapter">
							## Objecten en classes
				</section>
				<section>
							## Naamgevingsconflicten vermijden
							- Ga even mee in het onderstaande gedachtenexperiment
							- Je kan op termijn PHP projecten maken met honderden regels code.
							- Je zal veel variabelen aanmaken die allen uniek moeten zijn qua naamgeving
							- In volgend voorbeeld wordt tegen deze regel gezondigd

							```php
							&lt;?php
								$titel = "Welkom op mijn blog";
								/* honderden regels code later */
								$titel = "Webontwikkelaar";
								/* tweemaal dezelfde variabele aanmaken, dat is een probleem
								Gelukkig zijn er oplossingen :-) */
							?>

				</section>
				<section>
							## PHP Objecten
							- Je kan problemen te vermijden door een context te creëren in de vorm van een object
							- Je creëert een standaard PHP object door gebruik van StdClass
							- Een PHP object is net zoals een variabele waarin je waarden kan opslaan
							- Een variabele kan één waarde bevatten. In een object kan je zoveel waarden onderbrengen als je nodig hebt

							```php
							&lt;?php
								$paginaData = new StdClass();
								$paginaData-&gt;titel = "Welkom op mijn blog";
								/* honderden regels code later */
								$jobData = new StdClass();
								$jobData-&gt;titel = "Web ontwikkelaar";
							?&gt;
							```
				</section>
				<section>
							## PHP Objecten
							- Objecten kunnen dus gebruikt worden als namespaces voor eigenschappen. Zo worden conﬂicten vermeden en wordt een duidelijke context geboden
							- Om waarden van een object eigenschap te krijgen moet je 2 zaken aangeven: het object en de eigenschap
							- De object operator ziet eruit als een pijltje. Dat geeft aan dat je een bepaalde eigenschap wenst binnen een specifiek object

							```php
							$objectNaam = new StdClass();
							$objectNaam->eigenschapNaam = "waarde";
							$objectNaam->andereEigenschapNaam = "andere waarde";
							echo $objectNaam->eigenschapNaam;
							```
				</section>
				<section>
							## Aanpassen van onze index.php en pagina.php

							```php
							&lt;?php
								error_reporting( E_ALL );
								ini_set( "display_errors", 1 );
								$paginaData = new stdClass();
								$paginaData->titel = "Nieuwe object-georiënteerde test titel";
								$paginaData->content = "&lt;h1>Hallo, object!&lt;/h1>";
								$pagina = include_once "templates/pagina.php";
								echo $pagina;
							?>
							```

							```php
							&lt;?php 
								return "&lt;!DOCTYPE html> &lt;html> &lt;head> &lt;title>$paginaData-&gt;titel&lt;/title>&lt;
								meta http-equiv='Content-Type' content='text/html;charset=utf-8' />
								&lt;/head> &lt;body> $paginaData-&gt;content &lt;/body> &lt;/html>";
							?>
							```
				</section>
				<section class="chapter">
							## De HTML-template gebruiken voor elke pagina
				</section>
				<section>
							## De HTML-template gebruiken voor elke pagina
							We creëren twee pagina's in een nieuwe subfolder views: views/films.php en views/muziek.php

							```php
							&lt;?php
								return
									"&lt;h1>Mijn favoriete films&lt;/h1>
									&lt;p>Hier lees je alles over mijn passie voor films&lt;/p>";
							?>
							```

							```php
							&lt;?php
								return
									"&lt;h1>Mijn favoriete muziek&lt;/h1>
									&lt;p>Hier komt mijn CD top 10&lt;/p>";
							?>
							```
				</section>
				<section>
							## De HTML-template gebruiken voor elke pagina
							Vervolgens maken we views/navigatie.php aan, om dynamische site navigatie toe te voegen

							```php
							&lt;?php
								return "
									&lt;nav>
										&lt;a href='index.php?pagina=films'>Films&lt;/a>
										&lt;a href='index.php?pagina=muziek'>Muziek&lt;/a>
									&lt;/nav>";
							?>
							```
				</section>
				<section>
							## De HTML-template gebruiken voor elke pagina
							De navigatie voegen we als volgt toe aan index.php (maar we zijn nog niet helemaal klaar):

							```php
							&lt;?php
								error_reporting( E_ALL );
								ini_set( "display_errors", 1 );
								$paginaData = new stdClass();
								$paginaData->titel = "Mijn persoonlijke site";
								$paginaData->content = include_once "views/navigatie.php";
								$pagina = include_once "templates/pagina.php";
								echo $pagina;
							?>
							```
				</section>
				<section>
							## De HTML-template gebruiken voor elke pagina
							- We moeten er nog voor zorgen dat de bezoeker kan navigeren tussen "muziek" en "films"
							- Informatie doorgeven van pagina naar pagina is belangrijk bij dynamische pagina's
							- We kunnen informatie doorgeven via URL- variabelen
							- Als we op de links in de nav klikken dan wordt in de adresbalk een URL variabele meegegeven naar de volgende pagina. Die kan daar gebruikt worden

							```php
							index.php?pagina=films
							index.php?pagina=muziek
							```
				</section>
				<section>
							## De HTML-template gebruiken voor elke pagina
							- Om de informatie uit de URL-variabelen te krijgen gebruik je de $_GET superglobal array
							- We maken de volgende aanpassing aan onze index.php:

							```php
							&lt;?php
								$paginaData = new stdClass();
								$paginaData->titel = "Mijn persoonlijke site";
								$paginaData->content = include_once "views/navigatie.php";
								$navigatieIsClicked = isset($_GET['pagina']);
								if ($navigatieIsClicked ) {
									$bestandTeLaden = $_GET['pagina'];
									$paginaData->content .= "&lt;p>Hier moet $bestandTeLaden.php komen&lt;/p>";
								}
								$pagina = include_once "templates/pagina.php";
								echo $pagina;
							?>
							```
				</section>
				<section>
							## De HTML-template gebruiken voor elke pagina
							- De isset() functie gaat na of de variabele bestaat. Deze zal true teruggeven als de variabele effectief bestaat

							```php
							$navigatieIsClicked = isset($_GET['pagina']);
							```

							- Met $_GET krijg je toegang tot alle URL variabelen

							```php
							$_GET['variabele_naam'];
							```

							- Heb je daarnet de .= in de code gespot? Wordt de incrementele concatenatieoperator genoemd

							```php
							$paginaData->content .= "&lt;p>Hier moet $bestandTeLaden.php komen&lt;/p>";
							```

				</section>
				<section>
							## De HTML-template gebruiken voor elke pagina

							We wijzigen onze index.php: op deze manier laden we de juiste view op basis van de aanwezige URL-variabele

							```php
							&lt;?php
								$paginaData = new stdClass();
								$paginaData->titel = "Mijn persoonlijke site";
								$paginaData->content = include_once "views/navigatie.php";
								$navigatieIsClicked = isset($_GET['pagina']);
								if ($navigatieIsClicked ) {
									$bestandTeLaden = $_GET['pagina'];
									$paginaData->content .= include_once "views/$bestandTeLaden.php";
								}
								$pagina = include_once "templates/pagina.php";
								echo $pagina;
							?>
							```
				</section>
				<section>
							## De HTML-template gebruiken voor elke pagina
							We kunnen index.php een standaardpagina laten tonen indien er geen URL-variabele wordt meegegeven


							```php
								//deelcode voor index.php
								if ($navigatieIsClicked ) {
									$bestandTeLaden = $_GET['pagina'];
								} else {
									$bestandTeLaden = "muziek";
								}
								$paginaData->content .=include_once "views/$bestandTeLaden.php";
							```
				</section>
				<section class="chapter">
							## CSS toevoegen aan onze structuur
				</section>
				<section>
							## CSS toevoegen aan onze structuur
							We doen dit met een nieuwe paginadata eigenschap in onze pagina.php

							```php
							&lt;?php 
								return "&lt;!DOCTYPE html> &lt;html>  &lt;head> &lt;title>$paginaData->titel&lt;/title> 
								&lt;meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
								$paginaData->css &lt;/head>&lt;body>$paginaData->content&lt;/body>&lt;/html>";
							?>
							```
				</section>
				<section>
							## CSS toevoegen aan onze structuur
							... en in index.php vullen we deze eigenschap in

							```php
							&lt;?php 
								// ...
								$paginaData = new stdClass(); 
								$paginaData->titel = "Mijn persoonlijke site";
								$paginaData->content = include_once "views/navigatie.php"; 
								$paginaData->css = "&lt;link href='css/styling.css' rel='stylesheet' />";
								// ...
							?>
							```
				</section>
				<section class="chapter">
							## Van stdClass naar custom class
				</section>
				<section>
							## Werken met custom classes
							- We gaan een custom class aanmaken voor pagina_data
							- Maak een nieuwe folder aan die je classes noemt
							- Maak in deze folder een nieuwe ﬁle aan die je Pagina_Data.class.php noemt
							- Conventie = begint met een hoofdletter, woorden scheiden met een underscore, laten eindigen op .class.php
				</section>
				<section>
							## Pagina_data class aanmaken

							We voegen eerst nog snel een extra eigenschap toe aan pagina.php ;-)

							```php
							&lt;?php 
								return "&lt;!DOCTYPE html>&lt;html>  &lt;head> &lt;title>$paginaData->titel&lt;/title> 
								&lt;meta http-equiv='Content-Type' content='text/html;charset=utf-8' />
								$paginaData->css  $paginaData->embeddedStyle &lt;/head> &lt;body> 
								$paginaData->content &lt;/body> &lt;/html>";
							?>
							```
				</section>
				<section>
							## Pagina_data class aanmaken

							En vervolgens maken we Pagina_Data.class.php aan:

							```php
							&lt;?php
							class Pagina_Data {
								public $titel = "";
								public $content = "";
								public $css = "";
								public $embeddedStyle = "";
							}
							```

				</section>
				<section>
							## Een object instantiëren vanuit een custom class
							Doe je als volgt in je index.php

							```php
							//...
							include_once "classes/Pagina_Data.class.php";
							$paginaData = new Pagina_Data();
							//...
							```
				</section>
				<section>
							## De volledige index.php wordt dan...

							```php
							&lt;?php
								include_once "classes/Pagina_Data.class.php";
								$paginaData = new Pagina_Data();
								$paginaData->titel = "Mijn persoonlijke site";
								$paginaData->content = include_once "views/navigatie.php";
								$paginaData->css = "<link href='css/styling.css' rel='stylesheet' />";
								$navigatieIsClicked = isset($_GET['pagina']);
								if ($navigatieIsClicked ) {
									$bestandTeLaden = $_GET[‘pagina’];
								} else {
									$bestandTeLaden = "muziek";
								}
								$paginaData->content .=include_once "views/$bestandTeLaden.php";
								$paginaData->embeddedStyle = " &lt;style> nav a[href *= '?pagina=$fileToLoad']{
									background-color:white;} &lt;/style>";
								$pagina = include_once "templates/pagina.php";
								echo $pagina;
							```
				</section>
				<section>
							## Tot besluit
							- In deze presentatie: belangrijke basisconcepten van PHP gezien
							- Deze kennis zal je toelaten data aan te maken, op te slaan, te manipuleren en uit te sturen naar de browser
							- We breiden in de volgende presentatie onze PHP-kennis verder uit
							- Het is van het grootste belang dat je de opgedane kennis inoefent
							- Breid de site uit die we in deze presentatie zijn begonnen
							- Meng je ondertussen opgedane skills op vlak van HTML, CSS en JavaScript met PHP scripting. Experimenteer! Het is de sleutel tot een goede kennis van PHP
							- Opdracht: maak een eenvoudige persoonlijke website met minstens 5 pagina’s waarin je de concepten die we vandaag zagen gebruikt
				</section>
				<section>
							## WMP5 - PHP Basisconcepten
				</section>
	</body>
</html>
